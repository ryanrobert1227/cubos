import { useState, useEffect } from "react";

import { Link } from "react-router-dom";

import BackgroundImage from "../../components/BackgroundImage/BackgroundImage";
import AsideFaixa from "../../components/AsideFaixa/AsideFaixa";
import InitialButton from "../../components/button/Button";
import Input from "../../components/Input/Input";
import Li from "../../components/li/Li";

import { RegistroStyle } from "./style";

export default function RegistroPage() {
  const [isContinue, setIsCotinue] = useState(false);
  const [email, setEmail] = useState("");

  const [password, setPassword] = useState("");
  const [password2, setPassword2] = useState("");
  const [isValid1, setIsValid1] = useState(false);
  const [isValid2, setIsValid2] = useState(false);
  const [isValid3, setIsValid3] = useState(false);

  useEffect(() => {
    const re = /^(?=.*[A-Za-z])(?=.*[0-9]).*$/i;

    if (password.length >= 6) {
      setIsValid1(true);
    } else {
      setIsValid1(false);
    }

    if (password.match(re)) {
      setIsValid2(true);
    } else {
      setIsValid2(false);
    }
  }, [password]);

  useEffect(() => {
    if (password == password2 && password != "") {
      setIsValid3(true);
    } else {
      setIsValid3(false);
    }
  }, [password, password2]);

  function haddleValidarEmail(email: string) {
    const re = /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.(com|com\.br)$/;

    if (email.match(re)) {
      setIsCotinue(true);
      return;
    } else {
      return alert("Digite um Email valido");
    }
  }
  console.log(password);

  return (
    <RegistroStyle>
      <AsideFaixa></AsideFaixa>
      {!isContinue ? (
        <div className="left">
          <svg
            className="tittle"
            width="281"
            height="32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M17.446 9.846v3.076H7.306c-2.846 0-4.293 1.477-4.293 4.465v6.892c0 2.993 1.447 4.51 4.292 4.51h10.141v3.032H6.73C2.23 31.855 0 29.497 0 24.82V16.9c0-4.677 2.23-7.054 6.73-7.054h10.716zM24.983 9.905v14.409c0 2.993 1.442 4.509 4.253 4.509h7c2.85 0 4.298-1.516 4.298-4.51V9.906h2.954V24.82c0 4.676-2.27 7.034-6.73 7.034H28.7c-4.5 0-6.73-2.358-6.73-7.034V9.905h3.013zM52.546 0v24.319c0 2.988 1.442 4.504 4.253 4.504h7.084c2.85 0 4.293-1.516 4.293-4.505v-6.891c0-2.989-1.443-4.465-4.293-4.465h-9.846V9.87h10.451c4.5 0 6.725 2.358 6.725 7.035v7.916c0 4.676-2.225 7.034-6.725 7.034h-8.226c-4.499 0-6.729-2.358-6.729-7.034V0h3.013zM79.749 24.319c0 2.988 1.477 4.504 4.43 4.504h6.4c2.954 0 4.455-1.516 4.455-4.505v-6.891c0-2.989-1.501-4.465-4.455-4.465h-6.4c-2.953 0-4.43 1.476-4.43 4.465v6.892zM91.185 9.87c4.627 0 6.985 2.358 6.985 7.035v7.916c0 4.676-2.358 7.034-6.985 7.034h-7.582c-4.666 0-6.98-2.358-6.98-7.034v-7.916c0-4.677 2.314-7.035 6.98-7.035h7.582zM121.701 9.87v2.654h-13.316c-1.861 0-2.767.88-2.767 2.609v1.727c0 1.6.822 2.403 2.56 2.403h9.767c3.141 0 4.706 1.516 4.706 4.504v3.205c0 3.244-1.689 4.883-5.075 4.883h-14.69v-2.653h13.897c1.969 0 2.954-.842 2.954-2.61v-2.47c0-1.6-.827-2.403-2.521-2.403h-9.781c-3.141 0-4.751-1.516-4.751-4.509v-2.461c0-3.205 1.654-4.844 4.957-4.844l14.06-.035z"
              fill="#19272E"
            ></path>
            <path
              d="M140.058 9.575h3.283l-7.792 22.246h-3.284l7.793-22.246zM146.65 9.575h3.283L142.14 31.82h-3.283l7.793-22.246z"
              fill="#E5007B"
            ></path>
            <path
              d="M163.628 15.753c1.054.935 1.585 2.348 1.585 4.238v7.232h-3.446v-1.585c-.695 1.181-1.987 1.772-3.874 1.772a6.003 6.003 0 01-2.535-.492 3.797 3.797 0 01-1.644-1.374 3.534 3.534 0 01-.566-1.969 3.303 3.303 0 011.334-2.786c.889-.676 2.263-1.014 4.12-1.014h2.929a2.34 2.34 0 00-.733-1.856 3.216 3.216 0 00-2.196-.65c-.677.001-1.35.11-1.994.32a5.274 5.274 0 00-1.664.862l-1.324-2.575a7.96 7.96 0 012.491-1.132c.974-.267 1.979-.4 2.988-.4 1.966-.009 3.476.46 4.529 1.409zm-3.145 8.743c.489-.293.857-.75 1.038-1.29v-1.3h-2.515c-1.513 0-2.27.493-2.27 1.477a1.338 1.338 0 00.557 1.123c.449.297.983.44 1.521.408a3.22 3.22 0 001.669-.418zM170.23 26.583a6.244 6.244 0 01-3.446-5.705 6.22 6.22 0 013.446-5.701 7.773 7.773 0 013.647-.837 7.062 7.062 0 013.51.837 4.92 4.92 0 012.181 2.397l-2.84 1.526a3.13 3.13 0 00-2.86-1.752 3.252 3.252 0 00-2.383.945 3.487 3.487 0 00-.945 2.575 3.467 3.467 0 00.945 2.575 3.237 3.237 0 002.383.944 3.09 3.09 0 002.86-1.742l2.855 1.56a5.067 5.067 0 01-2.181 2.363 7.02 7.02 0 01-3.51.847 7.775 7.775 0 01-3.662-.832zM190.881 15.753c1.066.922 1.6 2.328 1.6 4.219v7.251h-3.446v-1.585c-.69 1.181-1.969 1.772-3.87 1.772a6.011 6.011 0 01-2.54-.492 3.803 3.803 0 01-1.644-1.374 3.586 3.586 0 01-.566-1.969 3.325 3.325 0 011.334-2.786c.889-.676 2.263-1.014 4.12-1.014h2.954a2.356 2.356 0 00-.773-1.87 3.233 3.233 0 00-2.2-.65 6.458 6.458 0 00-1.97.32 5.308 5.308 0 00-1.663.86l-1.325-2.574a7.998 7.998 0 012.491-1.132c.974-.266 1.979-.4 2.988-.399 1.953 0 3.456.474 4.51 1.423zm-3.141 8.762c.489-.292.857-.75 1.039-1.29v-1.319h-2.526c-1.513 0-2.269.493-2.269 1.477a1.325 1.325 0 00.556 1.123c.451.297.987.44 1.526.408a3.2 3.2 0 001.674-.418v.02zM208.406 9.698v17.525h-3.52v-1.477c-.909 1.103-2.232 1.654-3.968 1.654a6.563 6.563 0 01-3.244-.802 5.73 5.73 0 01-2.279-2.29 6.99 6.99 0 01-.827-3.445 6.967 6.967 0 01.827-3.446 5.675 5.675 0 012.279-2.29 6.562 6.562 0 013.244-.802 4.831 4.831 0 013.806 1.531V9.698h3.682zm-4.534 13.734a3.542 3.542 0 00.916-2.564 3.541 3.541 0 00-.921-2.56 3.298 3.298 0 00-4.652 0 3.53 3.53 0 00-.921 2.56 3.552 3.552 0 00.921 2.564 3.307 3.307 0 004.652 0h.005zM223.238 21.906h-9.589c.15.76.591 1.43 1.23 1.866.71.478 1.552.72 2.407.69.599.01 1.195-.09 1.758-.296a4.324 4.324 0 001.432-.935l1.97 2.126c-1.198 1.369-2.946 2.053-5.243 2.053a8.283 8.283 0 01-3.806-.837 6.193 6.193 0 01-2.55-2.328 6.827 6.827 0 010-6.74c.578-.99 1.42-1.8 2.432-2.338a7.543 7.543 0 016.838-.034 5.832 5.832 0 012.373 2.299 6.847 6.847 0 01.861 3.485c-.044.05-.069.379-.113.99zm-8.605-4.08a2.994 2.994 0 00-1.039 1.934h6.257a3.05 3.05 0 00-1.038-1.925 3.095 3.095 0 00-2.078-.719 3.14 3.14 0 00-2.102.71zM245.356 15.753c.935.935 1.403 2.343 1.403 4.214v7.256h-3.682v-6.71a3.445 3.445 0 00-.625-2.254 2.206 2.206 0 00-1.787-.744 2.626 2.626 0 00-2.053.837 3.633 3.633 0 00-.758 2.496v6.375h-3.682v-6.71c0-1.998-.803-2.998-2.408-2.998a2.61 2.61 0 00-2.033.837c-.551.71-.819 1.6-.753 2.496v6.375h-3.687V14.517h3.52v1.477a4.627 4.627 0 011.737-1.226 5.787 5.787 0 012.255-.423 5.46 5.46 0 012.432.527 4.319 4.319 0 011.748 1.55 5.14 5.14 0 011.969-1.536 6.207 6.207 0 012.614-.541 5.13 5.13 0 013.79 1.408zM261.97 14.517l-5.739 13.484c-.586 1.477-1.305 2.496-2.162 3.096a5.31 5.31 0 01-3.106.901 6.539 6.539 0 01-1.969-.305 4.433 4.433 0 01-1.585-.852l1.349-2.624c.288.257.622.458.984.591.35.14.722.213 1.098.217.439.02.871-.11 1.226-.37.379-.33.671-.747.852-1.215l.049-.119-5.504-12.799h3.8l3.574 8.615 3.609-8.62h3.524z"
              fill="#19272E"
            ></path>
            <path
              d="M270.753 9.575h3.283l-7.793 22.246h-3.283l7.793-22.246zM277.344 9.575h3.284L272.83 31.82h-3.278l7.792-22.246z"
              fill="#E5007B"
            ></path>
          </svg>
          <h1>Crie sua conta grátis</h1>
          <span>E tenha acesso a conteúdos exclusivos</span>
          <strong>Etapa 1 de 2: Dados pessoais</strong>
          <form method="post" autoComplete="on">
            <Input
              nome="E-mail"
              type="text"
              placeholder="dsaf@gmail.com"
              margintop="17px"
              mask=""
              setEmail={setEmail}
            />
            <Input
              nome="Nome Completo"
              type="text"
              placeholder="dsafadas dasd fas sadas"
              margintop="14px"
              mask=""
            />
            <span className="sub">Ou nome social, caso prefira</span>
            <Input
              nome="Celular"
              type="tel"
              margintop="8px"
              mask="(99) 9 9999-9999"
            />
            {email !== "" ? (
              <button
                className="submit_active"
                type="submit"
                onClick={(e: React.MouseEvent<HTMLButtonElement, MouseEvent>) =>
                  haddleValidarEmail(email)
                }
              >
                <svg
                  viewBox="0 0 12 6"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M8.224.209a.576.576 0 01.814-.074l2.668 2.233a.825.825 0 010 1.264L9.038 5.865a.576.576 0 01-.814-.074.583.583 0 01.074-.818L10.655 3 8.298 1.027a.583.583 0 01-.074-.818z"
                    fill="currentColor"
                  ></path>
                  <path
                    d="M0 3c0-.32.259-.58.578-.58H10.98c.319 0 .577.26.577.58a.58.58 0 01-.577.58H.578A.58.58 0 010 3z"
                    fill="currentColor"
                  ></path>
                </svg>
                Próxima etapa
              </button>
            ) : (
              <button className="submit" type="submit">
                <svg
                  viewBox="0 0 12 6"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M8.224.209a.576.576 0 01.814-.074l2.668 2.233a.825.825 0 010 1.264L9.038 5.865a.576.576 0 01-.814-.074.583.583 0 01.074-.818L10.655 3 8.298 1.027a.583.583 0 01-.074-.818z"
                    fill="currentColor"
                  ></path>
                  <path
                    d="M0 3c0-.32.259-.58.578-.58H10.98c.319 0 .577.26.577.58a.58.58 0 01-.577.58H.578A.58.58 0 010 3z"
                    fill="currentColor"
                  ></path>
                </svg>
                Próxima etapa
              </button>
            )}
          </form>

          <span className="register">
            Já tem uma conta? <Link to="/">Login</Link>
          </span>
        </div>
      ) : (
        <div className="left">
          <svg
            width="281"
            height="32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M17.446 9.846v3.076H7.306c-2.846 0-4.293 1.477-4.293 4.465v6.892c0 2.993 1.447 4.51 4.292 4.51h10.141v3.032H6.73C2.23 31.855 0 29.497 0 24.82V16.9c0-4.677 2.23-7.054 6.73-7.054h10.716zM24.983 9.905v14.409c0 2.993 1.442 4.509 4.253 4.509h7c2.85 0 4.298-1.516 4.298-4.51V9.906h2.954V24.82c0 4.676-2.27 7.034-6.73 7.034H28.7c-4.5 0-6.73-2.358-6.73-7.034V9.905h3.013zM52.546 0v24.319c0 2.988 1.442 4.504 4.253 4.504h7.084c2.85 0 4.293-1.516 4.293-4.505v-6.891c0-2.989-1.443-4.465-4.293-4.465h-9.846V9.87h10.451c4.5 0 6.725 2.358 6.725 7.035v7.916c0 4.676-2.225 7.034-6.725 7.034h-8.226c-4.499 0-6.729-2.358-6.729-7.034V0h3.013zM79.749 24.319c0 2.988 1.477 4.504 4.43 4.504h6.4c2.954 0 4.455-1.516 4.455-4.505v-6.891c0-2.989-1.501-4.465-4.455-4.465h-6.4c-2.953 0-4.43 1.476-4.43 4.465v6.892zM91.185 9.87c4.627 0 6.985 2.358 6.985 7.035v7.916c0 4.676-2.358 7.034-6.985 7.034h-7.582c-4.666 0-6.98-2.358-6.98-7.034v-7.916c0-4.677 2.314-7.035 6.98-7.035h7.582zM121.701 9.87v2.654h-13.316c-1.861 0-2.767.88-2.767 2.609v1.727c0 1.6.822 2.403 2.56 2.403h9.767c3.141 0 4.706 1.516 4.706 4.504v3.205c0 3.244-1.689 4.883-5.075 4.883h-14.69v-2.653h13.897c1.969 0 2.954-.842 2.954-2.61v-2.47c0-1.6-.827-2.403-2.521-2.403h-9.781c-3.141 0-4.751-1.516-4.751-4.509v-2.461c0-3.205 1.654-4.844 4.957-4.844l14.06-.035z"
              fill="#19272E"
            ></path>
            <path
              d="M140.058 9.575h3.283l-7.792 22.246h-3.284l7.793-22.246zM146.65 9.575h3.283L142.14 31.82h-3.283l7.793-22.246z"
              fill="#E5007B"
            ></path>
            <path
              d="M163.628 15.753c1.054.935 1.585 2.348 1.585 4.238v7.232h-3.446v-1.585c-.695 1.181-1.987 1.772-3.874 1.772a6.003 6.003 0 01-2.535-.492 3.797 3.797 0 01-1.644-1.374 3.534 3.534 0 01-.566-1.969 3.303 3.303 0 011.334-2.786c.889-.676 2.263-1.014 4.12-1.014h2.929a2.34 2.34 0 00-.733-1.856 3.216 3.216 0 00-2.196-.65c-.677.001-1.35.11-1.994.32a5.274 5.274 0 00-1.664.862l-1.324-2.575a7.96 7.96 0 012.491-1.132c.974-.267 1.979-.4 2.988-.4 1.966-.009 3.476.46 4.529 1.409zm-3.145 8.743c.489-.293.857-.75 1.038-1.29v-1.3h-2.515c-1.513 0-2.27.493-2.27 1.477a1.338 1.338 0 00.557 1.123c.449.297.983.44 1.521.408a3.22 3.22 0 001.669-.418zM170.23 26.583a6.244 6.244 0 01-3.446-5.705 6.22 6.22 0 013.446-5.701 7.773 7.773 0 013.647-.837 7.062 7.062 0 013.51.837 4.92 4.92 0 012.181 2.397l-2.84 1.526a3.13 3.13 0 00-2.86-1.752 3.252 3.252 0 00-2.383.945 3.487 3.487 0 00-.945 2.575 3.467 3.467 0 00.945 2.575 3.237 3.237 0 002.383.944 3.09 3.09 0 002.86-1.742l2.855 1.56a5.067 5.067 0 01-2.181 2.363 7.02 7.02 0 01-3.51.847 7.775 7.775 0 01-3.662-.832zM190.881 15.753c1.066.922 1.6 2.328 1.6 4.219v7.251h-3.446v-1.585c-.69 1.181-1.969 1.772-3.87 1.772a6.011 6.011 0 01-2.54-.492 3.803 3.803 0 01-1.644-1.374 3.586 3.586 0 01-.566-1.969 3.325 3.325 0 011.334-2.786c.889-.676 2.263-1.014 4.12-1.014h2.954a2.356 2.356 0 00-.773-1.87 3.233 3.233 0 00-2.2-.65 6.458 6.458 0 00-1.97.32 5.308 5.308 0 00-1.663.86l-1.325-2.574a7.998 7.998 0 012.491-1.132c.974-.266 1.979-.4 2.988-.399 1.953 0 3.456.474 4.51 1.423zm-3.141 8.762c.489-.292.857-.75 1.039-1.29v-1.319h-2.526c-1.513 0-2.269.493-2.269 1.477a1.325 1.325 0 00.556 1.123c.451.297.987.44 1.526.408a3.2 3.2 0 001.674-.418v.02zM208.406 9.698v17.525h-3.52v-1.477c-.909 1.103-2.232 1.654-3.968 1.654a6.563 6.563 0 01-3.244-.802 5.73 5.73 0 01-2.279-2.29 6.99 6.99 0 01-.827-3.445 6.967 6.967 0 01.827-3.446 5.675 5.675 0 012.279-2.29 6.562 6.562 0 013.244-.802 4.831 4.831 0 013.806 1.531V9.698h3.682zm-4.534 13.734a3.542 3.542 0 00.916-2.564 3.541 3.541 0 00-.921-2.56 3.298 3.298 0 00-4.652 0 3.53 3.53 0 00-.921 2.56 3.552 3.552 0 00.921 2.564 3.307 3.307 0 004.652 0h.005zM223.238 21.906h-9.589c.15.76.591 1.43 1.23 1.866.71.478 1.552.72 2.407.69.599.01 1.195-.09 1.758-.296a4.324 4.324 0 001.432-.935l1.97 2.126c-1.198 1.369-2.946 2.053-5.243 2.053a8.283 8.283 0 01-3.806-.837 6.193 6.193 0 01-2.55-2.328 6.827 6.827 0 010-6.74c.578-.99 1.42-1.8 2.432-2.338a7.543 7.543 0 016.838-.034 5.832 5.832 0 012.373 2.299 6.847 6.847 0 01.861 3.485c-.044.05-.069.379-.113.99zm-8.605-4.08a2.994 2.994 0 00-1.039 1.934h6.257a3.05 3.05 0 00-1.038-1.925 3.095 3.095 0 00-2.078-.719 3.14 3.14 0 00-2.102.71zM245.356 15.753c.935.935 1.403 2.343 1.403 4.214v7.256h-3.682v-6.71a3.445 3.445 0 00-.625-2.254 2.206 2.206 0 00-1.787-.744 2.626 2.626 0 00-2.053.837 3.633 3.633 0 00-.758 2.496v6.375h-3.682v-6.71c0-1.998-.803-2.998-2.408-2.998a2.61 2.61 0 00-2.033.837c-.551.71-.819 1.6-.753 2.496v6.375h-3.687V14.517h3.52v1.477a4.627 4.627 0 011.737-1.226 5.787 5.787 0 012.255-.423 5.46 5.46 0 012.432.527 4.319 4.319 0 011.748 1.55 5.14 5.14 0 011.969-1.536 6.207 6.207 0 012.614-.541 5.13 5.13 0 013.79 1.408zM261.97 14.517l-5.739 13.484c-.586 1.477-1.305 2.496-2.162 3.096a5.31 5.31 0 01-3.106.901 6.539 6.539 0 01-1.969-.305 4.433 4.433 0 01-1.585-.852l1.349-2.624c.288.257.622.458.984.591.35.14.722.213 1.098.217.439.02.871-.11 1.226-.37.379-.33.671-.747.852-1.215l.049-.119-5.504-12.799h3.8l3.574 8.615 3.609-8.62h3.524z"
              fill="#19272E"
            ></path>
            <path
              d="M270.753 9.575h3.283l-7.793 22.246h-3.283l7.793-22.246zM277.344 9.575h3.284L272.83 31.82h-3.278l7.792-22.246z"
              fill="#E5007B"
            ></path>
          </svg>
          <h1>Crie sua conta grátis</h1>
          <span>E tenha acesso a conteúdos exclusivos</span>
          <strong>Etapa 2 de 2: Dados pessoais</strong>
          <form>
            <Input
              nome="Nova senha"
              type="password"
              margintop="18px"
              mask=""
              setPassword={setPassword}
            />
            <Input
              nome="Confirmar nova senha"
              type="password"
              margintop="25px"
              mask=""
              setPassword2={setPassword2}
            />
            <div className="correction">
              <ul>
                <Li
                  boolean={isValid1}
                  text="A senha deve conter no mínimo 6 caracteres"
                />
                <Li
                  boolean={isValid2}
                  text="A senha deve ser formada por letras e números"
                />
                <Li boolean={isValid3} text="As senhas devem corresponder" />
              </ul>
            </div>
            <div className="botoes">
              {isValid1 && isValid2 && isValid3 ? (
                <Link to="/">
                  <InitialButton
                    name="Concluir"
                    width="9.4vw"
                    color="#E5007B"
                    opacity={1}
                    showHover
                  />
                </Link>
              ) : (
                <InitialButton
                  name="Concluir"
                  width="9.4vw"
                  color="#C5C7C9"
                  opacity={1}
                />
              )}
              <button
                onClick={() => setIsCotinue(false)}
                className="volta-etapa"
              >
                Etapa anterior
              </button>
            </div>
          </form>
        </div>
      )}
      <BackgroundImage
        width="69.5vw"
        image="url(https://i.ibb.co/ky8887D/Rectangle-137.jpg)"
        position="-96px"
      />
    </RegistroStyle>
  );
}
